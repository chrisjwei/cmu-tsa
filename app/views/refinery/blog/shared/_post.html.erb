<% if post.live? %>
  <article class="blog_post" id="<%= dom_id(post) %>">
    <header>
      <h1><%= link_to post.title, refinery.blog_post_path(post) %></h1>
    </header>
    <section class='details'>
      <time datetime="<%=l post.published_at.to_date, :format => :default %>" class='posted_at'>
        <%= t('created_at', :scope => 'refinery.blog.shared.posts', :when => l(post.published_at.to_date, :format => :long)) %>
      </time>
    </section>

    <section class='post clearfix'>
      <% if blog_post_teaser_enabled? %>
        <%= blog_post_teaser(post) %>
      <% else %>
        <%= post.body.html_safe %>
      <% end %>
      <p>
        <%= link_to t('read_more', :scope => 'refinery.blog.shared.posts'), refinery.blog_post_path(post) if blog_post_teaser_enabled? %>
      </p>
    </section>
    <footer>

      <aside class='comment_count'>
        <% if Refinery::Blog::Post.comments_allowed? %>
          <% if post.comments.any? %>
             (<%= pluralize(post.comments.approved.count, t('singular', :scope => 'refinery.blog.shared.comments')) %>)
          <% else %>
                (<%= t('none', :scope => 'refinery.blog.shared.comments') %>)
          <% end %>
        <% end %>
      </aside>
    </footer>
  </article>
<% end %>
